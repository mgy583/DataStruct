# 遍历二叉树

## 遍历类型

- 先序遍历
   1. 访问根节点
   2. 先序遍历左子树
   3. 先序遍历右子树

- 中序遍历
   1. 先序遍历左子树
   1. 访问根节点
   1. 先序遍历右子树

- 后序遍历
   1. 先序遍历左子树
   2. 先序遍历右子树
   3. 访问根节点

## 表达式

- 例如把表达式 $$ a+b*(c-d)-e/f && 转为二叉树:

  ```

          -
        /  \
       +    /
      / \  / \
     a   * e  f
        / \
       b   -
          / \
         c   d
  
  ```

先序遍历为: $$ -+a*b-cd/ef $$ 为前缀表示

中序遍历为: $$ a+b*c-d-e/f $$ 为中缀表示

后序遍历为: $$ abcd-*+ef/- $$ 为后缀表示

## 中序遍历求值

- 中序表达式求值涉及到两个主要的数据结构：操作符栈 与 操作数栈。其核心思路是逐个读取中序表达式的字符，根据字符的类型（操作数、操作符、括号）进行不同的处理，最终得到表达式的值。

### 步骤

 1. 初始化操作数栈和操作符栈
 2. 逐步读取中序表达式的字符:
  如果是 **操作数**, 压入 **操作数栈**
  如果是 **左括号**, 压入 **操作符栈**
  如果是 **右括号**, 依次从两个栈 **弹出操作符和操作数**，并将结果 **压入操作数栈**，直道弹出一个 **左括号**
  如果是操作符,
  &emsp;&emsp;  如果 **操作符栈** 为空，或栈顶是左括号，或当前操作符 **优先级** 高于栈顶操作符的 **优先级**，则直接压入 **操作符栈**。
    否则：
      从 **操作符栈** 中弹出一个操作符。
      从 **操作数栈** 中弹出所需的操作数。
      执行该操作符对应的运算。
      将结果压入 **操作数栈**。
      重复以上步骤，直到满足上述的压栈条件。

 3. 处理完所有字符后：
   如果 **操作符栈** 不为空，则：
     从 **操作符栈** 中弹出一个操作符。
     从 **操作数栈** 中弹出所需的操作数。
     执行该操作符对应的运算。
     将结果压入 **操作数栈**。
     重复以上步骤，直到 **操作符栈** 为空。

## 后序表达式求值

- 后序表达式求值主要依赖一个 操作数栈。其核心思路是逐个读取后序表达式的元素，并根据元素的类型（操作数或操作符）进行处理。

    1. 初始化一个 操作数栈:
         用于存储后序表达式中的数字。
    2. 逐个读取后序表达式的元素:
         如果是操作数，则直接压入 操作数栈。
        如果是操作符:
            从 操作数栈 中弹出所需的操作数。注意，因为操作符是后置的，所以先弹出的数字是第二操作数，后弹出的是第一操作数。
            根据操作符执行相应的运算。
            将计算结果压入 操作数栈。
    3. 完成后序表达式的读取：
        操作数栈 中的顶部元素即为整个后序表达式的值。

## 线索二叉树

- 线索二叉树（Threaded Binary Tree）是一种为了提高二叉树遍历效率而设计的数据结构。它通过利用二叉树中原本为空的指针域来存储指向前驱或后继结点的指针（称为“线索”），从而省去递归或栈的遍历方式。

- 普通二叉树 的结点有两个指针：left 和 right，但在一棵 n 个结点的二叉树中，实际的左右子树为空的指针数有很多（约 2n 个）。线索二叉树的思想就是把 这些空指针利用起来，指向结点在某种遍历序列中的前驱或后继。

```c
// ltag = 1 时表示 lchild 域指向节点的前驱
// rtag = 1 时表示 rchild 域指向节点的后继
typedef struct ThreadNode {
    ElementType data;
    struct ThreadNode *lchild, *rchild;
    int ltag, rtag;
} ThreadNode;`
```

- 线索二叉树中的每个节点都可以包含以下线索信息：

  - 前驱线索
      如果 p 的左子指针 left 原本为空，那么将其改为指向 p 的“遍历前驱结点”。
      同时 ltag = 1，表示这个指针是线索，而不是左孩子。
  - 后继线索
      如果 p 的右子指针 right 原本为空，那么将其改为指向 p 的“遍历后继结点”。
      同时 rtag = 1，表示这个指针是线索，而不是右孩子。
